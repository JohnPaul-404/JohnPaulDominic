<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Video from MySQL</title>
</head>
<body>

<h1>Embedded YouTube Video</h1>
<div id="video-container">Loading video...</div>

<script>
    // Fetch video ID from the PHP API
    fetch('get-video.php')
        .then(response => response.json())
        .then(data => {
            if (data.videoId) {
                // Create iframe
                const iframe = document.createElement("iframe");
                iframe.width = "560";
                iframe.height = "315";
                iframe.src = `https://www.youtube.com/embed/${data.videoId}`;
                iframe.title = "YouTube video player";
                iframe.frameBorder = "0";
                iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
                iframe.allowFullscreen = true;

                // Insert iframe into the page
                const container = document.getElementById("video-container");
                container.innerHTML = ""; // Clear loading text
                container.appendChild(iframe);
            } else {
                document.getElementById("video-container").innerText = "Error loading video.";
            }
        })
        .catch(error => {
            console.error("Error fetching video ID:", error);
            document.getElementById("video-container").innerText = "Failed to load video.";
        });
</script>

</body>
</html>
